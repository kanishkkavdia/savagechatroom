{"ast":null,"code":"import _toConsumableArray from\"C:\\\\react\\\\clone\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\react\\\\clone\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Button,FormControl,InputLabel,Input}from'@material-ui/core';import'./App.css';import Message from'./Message';import db from'./firebase';import firebase from'firebase';function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];//{username:\"steve\",text:\"Hello\"}\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];useEffect(function(){db.collection('messages').orderBy(\"timestamp\",\"asc\").onSnapshot(function(snapshot){setMessages(snapshot.docs.map(function(doc){return doc.data();}));});},[]);useEffect(function(){setUsername(prompt(\"Enter username: \"));},[]);console.log(input);console.log(messages);var sendMessage=function sendMessage(event){event.preventDefault();db.collection('messages').add({text:input,username:username,timestamp:firebase.firestore.FieldValue.serverTimestamp()});setMessages([].concat(_toConsumableArray(messages),[{username:username,text:input}]));//append messages\nsetInput(\"\");};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Welcome \",username),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"my-input\"},\"Enter a message\"),/*#__PURE__*/React.createElement(Input,{value:input,onChange:function onChange(event){return setInput(event.target.value);}}),/*#__PURE__*/React.createElement(Button,{disabled:!input,variant:\"contained\",color:\"primary\",type:\"submit\",onClick:sendMessage},\"Send Message\")),messages.map(function(message){return/*#__PURE__*/React.createElement(Message,{username:username,message:message});}));}export default App;","map":{"version":3,"sources":["C:/react/clone/src/App.js"],"names":["React","useState","useEffect","Button","FormControl","InputLabel","Input","Message","db","firebase","App","input","setInput","messages","setMessages","username","setUsername","collection","orderBy","onSnapshot","snapshot","docs","map","doc","data","prompt","console","log","sendMessage","event","preventDefault","add","text","timestamp","firestore","FieldValue","serverTimestamp","target","value","message"],"mappings":"gSAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,KAAuC,OAAvC,CACA,OAASC,MAAT,CAAgBC,WAAhB,CAA4BC,UAA5B,CAAuCC,KAAvC,KAAmD,mBAAnD,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,QAASC,CAAAA,GAAT,EAAe,eACUT,QAAQ,CAAC,EAAD,CADlB,wCACNU,KADM,eACAC,QADA,8BAEgBX,QAAQ,CAAC,EAAD,CAFxB,yCAENY,QAFM,eAEGC,WAFH,eAE8B;AAF9B,eAGgBb,QAAQ,CAAC,EAAD,CAHxB,yCAGNc,QAHM,eAGGC,WAHH,eAKbd,SAAS,CAAC,UAAM,CACdM,EAAE,CAACS,UAAH,CAAc,UAAd,EACCC,OADD,CACS,WADT,CACqB,KADrB,EAECC,UAFD,CAEY,SAAAC,QAAQ,CAAE,CACpBN,WAAW,CAACM,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAArB,CAAD,CAAX,CACD,CAJD,EAKD,CANQ,CAMN,EANM,CAAT,CAQAtB,SAAS,CAAC,UAAM,CACdc,WAAW,CAACS,MAAM,CAAC,kBAAD,CAAP,CAAX,CACD,CAFQ,CAEN,EAFM,CAAT,CAKAC,OAAO,CAACC,GAAR,CAAYhB,KAAZ,EACAe,OAAO,CAACC,GAAR,CAAYd,QAAZ,EAEA,GAAMe,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAACC,KAAD,CAAS,CACzBA,KAAK,CAACC,cAAN,GACAtB,EAAE,CAACS,UAAH,CAAc,UAAd,EAA0Bc,GAA1B,CAA8B,CAC5BC,IAAI,CAACrB,KADuB,CAE5BI,QAAQ,CAACA,QAFmB,CAG5BkB,SAAS,CAACxB,QAAQ,CAACyB,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EAHkB,CAA9B,EAKAtB,WAAW,8BAAKD,QAAL,GAAc,CAACE,QAAQ,CAACA,QAAV,CAAmBiB,IAAI,CAACrB,KAAxB,CAAd,GAAX,CAA0D;AAC1DC,QAAQ,CAAC,EAAD,CAAR,CACD,CATD,CAUA,mBACE,2BAAK,SAAS,CAAC,KAAf,eACE,yCAAaG,QAAb,CADF,cAEE,oBAAC,WAAD,mBACE,oBAAC,UAAD,EAAY,OAAO,CAAC,UAApB,oBADF,cAEE,oBAAC,KAAD,EAAO,KAAK,CAAEJ,KAAd,CAAqB,QAAQ,CAAE,kBAAAkB,KAAK,QAAEjB,CAAAA,QAAQ,CAACiB,KAAK,CAACQ,MAAN,CAAaC,KAAd,CAAV,EAApC,EAFF,cAGE,oBAAC,MAAD,EAAQ,QAAQ,CAAE,CAAC3B,KAAnB,CAA0B,OAAO,CAAC,WAAlC,CAA8C,KAAK,CAAC,SAApD,CAA8D,IAAI,CAAC,QAAnE,CAA4E,OAAO,CAAEiB,WAArF,iBAHF,CAFF,CAQIf,QAAQ,CAACS,GAAT,CAAa,SAAAiB,OAAO,qBAClB,oBAAC,OAAD,EAAS,QAAQ,CAAExB,QAAnB,CAA6B,OAAO,CAAEwB,OAAtC,EADkB,EAApB,CARJ,CADF,CAgBD,CACD,cAAe7B,CAAAA,GAAf","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport { Button,FormControl,InputLabel,Input} from '@material-ui/core';\nimport './App.css';\nimport Message from './Message';\nimport db from './firebase';\nimport firebase from 'firebase';\nfunction App() {\n  const [input,setInput]=useState(\"\");\n  const [messages,setMessages]=useState([]); //{username:\"steve\",text:\"Hello\"}\n  const [username,setUsername]=useState(\"\");\n  \n  useEffect(() => {\n    db.collection('messages')\n    .orderBy(\"timestamp\",\"asc\")\n    .onSnapshot(snapshot=>{\n      setMessages(snapshot.docs.map(doc=>doc.data()));\n    })\n  }, [])\n\n  useEffect(() => {\n    setUsername(prompt(\"Enter username: \"));\n  }, [])\n\n\n  console.log(input);\n  console.log(messages);\n\n  const sendMessage=(event)=>{\n    event.preventDefault();\n    db.collection('messages').add({\n      text:input,\n      username:username,\n      timestamp:firebase.firestore.FieldValue.serverTimestamp()\n    })\n    setMessages([...messages,{username:username,text:input}]);//append messages\n    setInput(\"\");\n  }\n  return (\n    <div className=\"App\">\n      <h1>Welcome {username}</h1>\n      <FormControl>\n        <InputLabel htmlFor=\"my-input\">Enter a message</InputLabel>\n        <Input value={input} onChange={event=>setInput(event.target.value)}/>\n        <Button disabled={!input} variant=\"contained\" color=\"primary\" type=\"submit\" onClick={sendMessage}>Send Message</Button>\n      </FormControl>\n      {\n        messages.map(message=>(\n          <Message username={username} message={message} />\n        \n        ))\n      }\n    </div>\n  );\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}